<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ichthyop User Guide - 3&nbsp; Ichthyop console</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./release.html" rel="next">
<link href="./ichconf.html" rel="prev">
<link href="./_static/logo-ichthyop.svg" rel="icon" type="image/svg+xml">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./console.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ichthyop console</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./_static/logo-ichthyop.svg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Ichthyop User Guide</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/ichthyop/ichthyop/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Ichthyop-User-Guide.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting started</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ichconf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Ichthyop configuration</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./console.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ichthyop console</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Particle release</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./process.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ichthyop processes</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#configuration" id="toc-configuration" class="nav-link active" data-scroll-target="#configuration"><span class="header-section-number">3.1</span> Configuration</a>
  <ul class="collapse">
  <li><a href="#new-configuration-file" id="toc-new-configuration-file" class="nav-link" data-scroll-target="#new-configuration-file"><span class="header-section-number">3.1.1</span> New configuration file</a></li>
  <li><a href="#content-of-the-configuration-file" id="toc-content-of-the-configuration-file" class="nav-link" data-scroll-target="#content-of-the-configuration-file"><span class="header-section-number">3.1.2</span> Content of the configuration file</a></li>
  </ul></li>
  <li><a href="#zone-definition" id="toc-zone-definition" class="nav-link" data-scroll-target="#zone-definition"><span class="header-section-number">3.2</span> Zone definition</a>
  <ul class="collapse">
  <li><a href="#adding-removing-and-renaming-zones" id="toc-adding-removing-and-renaming-zones" class="nav-link" data-scroll-target="#adding-removing-and-renaming-zones"><span class="header-section-number">3.2.1</span> Adding, removing and renaming zones</a></li>
  <li><a href="#editing-a-zone" id="toc-editing-a-zone" class="nav-link" data-scroll-target="#editing-a-zone"><span class="header-section-number">3.2.2</span> Editing a zone</a></li>
  </ul></li>
  <li><a href="#running" id="toc-running" class="nav-link" data-scroll-target="#running"><span class="header-section-number">3.3</span> Running</a></li>
  <li><a href="#visualize-results" id="toc-visualize-results" class="nav-link" data-scroll-target="#visualize-results"><span class="header-section-number">3.4</span> Visualize results</a>
  <ul class="collapse">
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">3.4.1</span> Results</a></li>
  <li><a href="#set-particle-color" id="toc-set-particle-color" class="nav-link" data-scroll-target="#set-particle-color"><span class="header-section-number">3.4.2</span> Set particle color</a></li>
  <li><a href="#make-maps-using-web-map-service" id="toc-make-maps-using-web-map-service" class="nav-link" data-scroll-target="#make-maps-using-web-map-service"><span class="header-section-number">3.4.3</span> Make maps using Web Map Service</a></li>
  <li><a href="#export-trajectories-to-kmz-format" id="toc-export-trajectories-to-kmz-format" class="nav-link" data-scroll-target="#export-trajectories-to-kmz-format"><span class="header-section-number">3.4.4</span> Export trajectories to KMZ format</a></li>
  </ul></li>
  <li><a href="#animation" id="toc-animation" class="nav-link" data-scroll-target="#animation"><span class="header-section-number">3.5</span> Animation</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/ichthyop/ichthyop/edit/main/console.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ichthyop/ichthyop/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-console" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ichthyop console</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this section, the Ichthyop console is described.</p>
<section id="configuration" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="configuration"><span class="header-section-number">3.1</span> Configuration</h2>
<p>Here you will find the usual “File menu” functions : create a new configuration file, open an existing one, close it or save and save as the configuration file.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="console/_static/step1-configure.png" class="img-fluid figure-img"></p>
<figcaption>Step 1, configure</figcaption>
</figure>
</div>
<section id="new-configuration-file" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="new-configuration-file"><span class="header-section-number">3.1.1</span> New configuration file</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="console/_static/new.png" class="img-fluid figure-img"></p>
<figcaption>Step 1, create a new configuration file</figcaption>
</figure>
</div>
<p>The application comes with some preset examples of configuration files (the templates). Select one of the templates, change the name of the configuration if the suggested name does not suit you and click on the Create button.</p>
</section>
<section id="content-of-the-configuration-file" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="content-of-the-configuration-file"><span class="header-section-number">3.1.2</span> Content of the configuration file</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="console/_static/edit.png" class="img-fluid figure-img"></p>
<figcaption>Step 1, edit the configuration file</figcaption>
</figure>
</div>
<p>The configuration file is organized in several categories and each category contains several blocks of parameters.</p>
<p>When the configuration file is created out of a template, it is ready to use and you do not need to change any parameter for running the simulation. Little by little you can explore the configuration file, starting with the “Main” blocks and change some parameters to see what is happening. On a second time you can start playing with the advanced parameters that activate and control the behaviors of the particles.</p>
<p>Main blocks:</p>
<ul>
<li>Time: Set the simulation time options, such as the beginning of the simulation, the duration of transport, the time step, etc.</li>
<li>Output: Options that control the record of the particle tracks in a NetCDF output file.</li>
<li>Dataset: Management of the hydrodynamic dataset.</li>
<li>Release: Determine how and where the particles should be released.</li>
</ul>
<p>Advanced blocks:</p>
<ul>
<li>Transport: Parameters for controlling the advection process, the dispersion, the vertical migration, the wind drift, etc.</li>
<li>Release: Additional ways for releasing particles, from zones, with position recorded in a text file or in a NetDCF file, etc.</li>
<li>Biology: Control the biological processes such as growth or cold water sensitivity, etc.</li>
</ul>
<p>Each block is fully described and commented in the block information area. As well, you will find a description and the necessary explanations for each parameter in the parameter information area.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do not forget to save the configuration file before going to the next step.</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Parameters cannot be added from within the Ichthyop console. Only paramters that are already defined on the XML file can be edited using the console</strong></p>
</div>
</div>
</section>
</section>
<section id="zone-definition" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="zone-definition"><span class="header-section-number">3.2</span> Zone definition</h2>
<p>In Ichthyop, the user can define zones, either release zones or recruitment zones.</p>
<p>The zones can be edited using the GUI, as shown in <a href="#fig-gui-zone" class="quarto-xref">Figure&nbsp;<span class="quarto-unresolved-ref">fig-gui-zone</span></a></p>
<div id="fig-gui-zone" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gui-zone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="console/_static/zone.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gui-zone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Ichthyop Zone editor
</figcaption>
</figure>
</div>
<section id="adding-removing-and-renaming-zones" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="adding-removing-and-renaming-zones"><span class="header-section-number">3.2.1</span> Adding, removing and renaming zones</h3>
<p>The number of zones is managed on the left part of the panel.</p>
<p>New zones can be added by clicking the <img src="console/_static/ico22/list-add.png" class="img-fluid"> button. When a zone is selected, it can be removed by clicking on the <img src="console/_static/ico22/list-remove.png" class="img-fluid"> button.</p>
<p>The reordering of the zones is achieved by clicking on the <img src="console/_static/ico22/up.png" class="img-fluid"> and <img src="console/_static/ico22/down.png" class="img-fluid"> buttons.</p>
<p>When double-clicking on the name of the zone on the left panel, the user can edit the zone name.</p>
</section>
<section id="editing-a-zone" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="editing-a-zone"><span class="header-section-number">3.2.2</span> Editing a zone</h3>
<p>When a zone is selected, the user can edit different parameters associated with the zone.</p>
<p>First, the user can enable or disable a zone by clicking on the {guilabel}<code>Enabled</code> tick box.</p>
<p>The zones are defined by providing the points coordinates. Points can be added, removed and reordered by using the <img src="console/_static/ico22/list-add.png" class="img-fluid">, <img src="console/_static/ico22/list-remove.png" class="img-fluid">, <img src="console/_static/ico22/up.png" class="img-fluid"> and <img src="console/_static/ico22/down.png" class="img-fluid"> buttons, respectively. The user can also change the format of the points coordinates by clicking on the radio buttons in the <code>Options</code> bottom panel.</p>
<p>Ichthyop defines two types of zones: one for release (see <a href="#sec-zone-release" class="quarto-xref"><span class="quarto-unresolved-ref">sec-zone-release</span></a>) problèmeand one for recruitment purposes. This type is chosen by using the <code>Type of zone</code> combo box. For release zones, the user can specify the number of particles that will be released in the zone (only if the <code>user_defined_nparticles</code> parameter is set equal to true, cf <a href="#sec-zone-release" class="quarto-xref"><span class="quarto-unresolved-ref">sec-zone-release</span></a>). It is done by filling the <code>Number of released particles</code> textbox and pressing <code>ENTER</code></p>
<p>Each zone is associated with a color, that will be used to its representation in the graphical interface during the preview and the display of the simulation results. This color can be edited by using the <img src="console/_static/ico22/fill-color.png" class="img-fluid"> button.</p>
<p>In the case of 3D simulations, you can specify the depth range to use in the zone. To activate this feature, click on the <code>Activated</code> tick box of the <code>Thickness</code> panel. You can provide the lower and upper depth that must be considered in the given zone (negative values).</p>
<p>In 3D simulations, you can also specify the bathymetric range that you want to include, for instance if you want to release particles only on the ocean shelf (i.e depth less than 200m). This can be done by activating the feature by clicking on the <code>Activated</code> tick box of the <code>Bathymetric mask</code> panel.</p>
</section>
</section>
<section id="running" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="running"><span class="header-section-number">3.3</span> Running</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="console/_static/step2-simulate.png" class="img-fluid figure-img"></p>
<figcaption>Step 2, simulation</figcaption>
</figure>
</div>
<p>You may want to preview the simulated area. Click on the “Preview” button. The main interest in previewing the area is that the application will check if the simulation is correctly set up. Here “correctly” does not mean you made a relevant parametrization in terms of physics or biology, but at least the application had found all the parameters required for starting the simulation. More specifically, Ichthyop will attempt to read the geographical variables (longitude, latitude and depth) from the dataset in order to draw the area. It should also display the release and the recruitment zones if they have been defined and activated in the configuration file. Make sure what you see is what you expect, and go back to “Step 1: configure” in case not.</p>
<p>When the preview is satisfactory, click on “Run simulation” for starting the simulation. The progress bar will give an estimation of the remaining time for the simulation to complete. You can interrupt (but not pause) the simulation anytime by a click on “Stop simulation”.</p>
<p>Depending the capabilities of your computer, the number of released particles, how many actions are implemented, etc. the simulation might requires a large amount of the available dynamic memory and the application might look like it is frozen. Wait until the simulation run to completion. Refer to section “Java Heap Space” if the application crashes because of memory problem.</p>
</section>
<section id="visualize-results" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="visualize-results"><span class="header-section-number">3.4</span> Visualize results</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="console/_static/step3-mapping.png" class="img-fluid figure-img"></p>
<figcaption>Step 3, mapping</figcaption>
</figure>
</div>
<p>When the simulation is completed, the application automatically opens the current Ichthyop output file for visualizing the results. If your computer is connected to Internet, you should see the map being centered above the simulated area. Otherwise, it only displays a Grey background.</p>
<p>You may want to skip that step or keep it for later. In that case, just click on “Close NetCDF” and go to any other steps or exit the application. Any time, you can go back to this step: click on “Open NetCDF” and select the Ichthyop output file you wish to visualize. When the NetCDF file is opened, the application brings you back to the exact point where it was when the simulation just completed.</p>
<p>The application offers two ways for visualizing the results : draw the particle trajectories with a Web Map Service or export the particle trajectories in a KMZ file that can be opened with Google Earth. Both functions are completely independent one from another.</p>
<section id="results" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="results"><span class="header-section-number">3.4.1</span> Results</h3>
<p>Ichthyop archives the particle trajectories in NetCDF format, a machine-independent data formats for sharing array-oriented scientific data. The NetDCF file is recorded in the output folder (set in the Output section of the configuration file) and the file name contains the date and time of creation of the file.</p>
<p>Default contents of the NetCDF output file: time of the simulation, longitude, latitude, and depth at particle position, and mortality status.</p>
</section>
<section id="set-particle-color" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="set-particle-color"><span class="header-section-number">3.4.2</span> Set particle color</h3>
<p>The <code>Default color</code> button determines the particle color for visualizing the trajectories.</p>
<p>Particles are plotted as small circles. <code>Particle size</code> determines the diameter of the circle in pixel.</p>
<p>To use a colorbar, select in the Combo box a variable archived in the Ichthyop output file you wish to visualize as a tri-color range. The <code>Auto range</code> button will scan the values of the variable and suggest the following range : [mean - 2 * standard deviation; mean + 2 * standard deviation]. Do not forget to click on <code>Apply settings</code> for validating the changes of the color bar.</p>
<p>For taking off the color bar, select the <code>None</code> item in the Combo box and click on <code>Apply settings</code>. A click on <code>Default color</code> button should also deactivate the color bar.</p>
</section>
<section id="make-maps-using-web-map-service" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="make-maps-using-web-map-service"><span class="header-section-number">3.4.3</span> Make maps using Web Map Service</h3>
<p>According to Wikipedia, a Web Map Service (WMS) is a standard protocol for serving georeferenced map images over the Internet.</p>
<p>Ichthyop provides three different WMS for displaying the ocean bathymetry and the cost line as a background of the particle trajectories.</p>
<p>Maps can be intuitively zoomed in and out with the mouse wheel and re-centered doing a mere drag and drop.</p>
<p>Depending on the quality of the Internet connection and how busy is the Web Map Server, the display of the background tiles might take a while or even not work at all. In that case, try again with a distinct WMS and change the zoom scale.</p>
<p>When the settings of the map looks satisfactory, click on “Make maps” button. Ichthyop will create a folder that has exactly the same name than the simulation NetCDF output file (without the .nc extension) in the output directory. Then maps are recorded in this folder as PNG pictures.</p>
<p>Again, depending on the computer capabilities and the number of particles, the map creation might require a large amount of the available dynamic memory and the application looks like it is frozen. Wait for the application to complete this step. Refer to section “Java Heap Space” if the application crashes because of memory problem.</p>
</section>
<section id="export-trajectories-to-kmz-format" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="export-trajectories-to-kmz-format"><span class="header-section-number">3.4.4</span> Export trajectories to KMZ format</h3>
<p>By default, Ichthyop records the particle trajectories in NetCDF format. It is perfectly adapted for archiving and sharing scientific data since it is a machine independent and array-oriented format. But it is not much handy for visualizing results.</p>
<p>Click on “Export to KMZ” button for recording the particle trajectories into a KMZ file. The file is recorded in the same directory than the Ichthyop output file, with the same name and the “.kmz” extension. KMZ format is the standard file format for visualizing georeferenced information with GoogleEarth.</p>
<p>Color settings (default color or color bar) and particle size will also be stored in the KMZ file.</p>
<p>When the export has performed, browse to the output folder and click on the KMZ file for launching GoogleEarth (assuming the program is installed on your computer).</p>
</section>
</section>
<section id="animation" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="animation"><span class="header-section-number">3.5</span> Animation</h2>
<p>Here you will find the usual “File menu” functions : create a new configuration file, open an existing one, close it or save and save as the configuration file.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="console/_static/step4-animation.png" class="img-fluid figure-img"></p>
<figcaption>Step 4, Animation</figcaption>
</figure>
</div>
<p>You may want to skip that step or keep it for later. In that case, just go to any other steps or exit the application. Any time, you can go back to this step, click on “Open maps” and select the simulation output folder that contains the PNG pictures you wish to visualize. When the folder is opened, the application brings you back to the exact point where it was when the map creation just completed.</p>
<p>Set the number of frames per second of the animation with the spinner.</p>
<p>You can also create an animated GIF. The file is recorded in the same directory than the Ichthyop output file, with the same name and the “.gif” extension.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ichconf.html" class="pagination-link" aria-label="Ichthyop configuration">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Ichthyop configuration</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./release.html" class="pagination-link" aria-label="Particle release">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Particle release</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ichthyop/ichthyop/edit/main/console.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ichthyop/ichthyop/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>